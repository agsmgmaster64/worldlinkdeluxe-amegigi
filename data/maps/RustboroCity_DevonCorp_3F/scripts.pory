mapscripts RustboroCity_DevonCorp_3F_MapScripts {
	MAP_SCRIPT_ON_TRANSITION {
		if (var(VAR_DEVON_CORP_3F_STATE) == 0) {
			setobjectxyperm(LOCALID_DEVON_CORP_3F_EMPLOYEE, 3, 2)
			setobjectmovementtype(LOCALID_DEVON_CORP_3F_EMPLOYEE, MOVEMENT_TYPE_FACE_LEFT)
		}
		end
	}
	MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE [
		VAR_DEVON_CORP_3F_STATE, 0 {
			turnobject(LOCALID_PLAYER, DIR_EAST)
			end
		}
	]
	MAP_SCRIPT_ON_FRAME_TABLE [
		VAR_DEVON_CORP_3F_STATE, 0 {
			lockall
			msgbox(RustboroCity_DevonCorp_3F_Text_ThisIs3rdFloorWaitHere)
			closemessage
			applymovement(LOCALID_DEVON_CORP_3F_EMPLOYEE, RustboroCity_DevonCorp_3F_Movement_EmployeeWalkOffscreen)
			waitmovement(0)
			delay(80)
			applymovement(LOCALID_DEVON_CORP_3F_EMPLOYEE, RustboroCity_DevonCorp_3F_Movement_EmployeeReturnToPlayer)
			waitmovement(0)
			msgbox(RustboroCity_DevonCorp_3F_Text_WordWithPresidentComeWithMe)
			closemessage
			playbgm(MUS_FOLLOW_ME, FALSE)
			applymovement(LOCALID_DEVON_CORP_3F_EMPLOYEE, RustboroCity_DevonCorp_3F_Movement_LeadPlayerToPresident)
			applymovement(LOCALID_PLAYER, RustboroCity_DevonCorp_3F_Movement_PlayerFollowToPresident)
			waitmovement(0)
			msgbox(RustboroCity_DevonCorp_3F_Text_PleaseGoAhead)
			closemessage
			fadedefaultbgm
			applymovement(LOCALID_DEVON_CORP_3F_EMPLOYEE, RustboroCity_DevonCorp_3F_Movement_EmployeeFaceDesk)
			applymovement(LOCALID_PLAYER, RustboroCity_DevonCorp_3F_Movement_PlayerApproachDesk)
			waitmovement(0)
			msgbox(RustboroCity_DevonCorp_3F_Text_MrStoneIHaveFavor)
			giveitem(ITEM_LETTER)
			msgbox(RustboroCity_DevonCorp_3F_Text_MrStoneWantYouToHaveThis)
			playfanfare(MUS_OBTAIN_ITEM)
			message(RustboroCity_DevonCorp_3F_Text_ReceivedPokenav)
			waitfanfare
			setflag(FLAG_SYS_POKENAV_GET)
			setflag(FLAG_RECEIVED_POKENAV)
			setflag(FLAG_HIDE_RUSTBORO_CITY_POKEMON_SCHOOL_SCOTT)
			msgbox(RustboroCity_DevonCorp_3F_Text_MrStoneExplainPokenavRestUp)
			closemessage
			call(Common_EventScript_OutOfCenterPartyHeal)
			msgbox(RustboroCity_DevonCorp_3F_Text_MrStoneGoWithCautionAndCare)
			setflag(FLAG_HIDE_ROUTE_116_WANDAS_BOYFRIEND)
			clearflag(FLAG_HIDE_RUSTURF_TUNNEL_WANDAS_BOYFRIEND)
			clearflag(FLAG_HIDE_RUSTURF_TUNNEL_WANDA)
			clearflag(FLAG_HIDE_BRINEYS_HOUSE_MR_BRINEY)
			clearflag(FLAG_HIDE_BRINEYS_HOUSE_PEEKO)
			setvar(VAR_BRINEY_LOCATION, 1)
			clearflag(FLAG_HIDE_RUSTBORO_CITY_RIVAL)
			setvar(VAR_DEVON_CORP_3F_STATE, 1)
			setvar(VAR_RUSTBORO_CITY_STATE, 6)
			releaseall
			end
		}
	]
}

raw `
RustboroCity_DevonCorp_3F_Movement_LeadPlayerToPresident:
	walk_right
	walk_right
	walk_right
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_in_place_faster_left
	step_end

RustboroCity_DevonCorp_3F_Movement_EmployeeFaceDesk:
	delay_16
	walk_in_place_faster_down
	step_end

RustboroCity_DevonCorp_3F_Movement_EmployeeWalkOffscreen:
	walk_right
	walk_right
	walk_right
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	step_end

RustboroCity_DevonCorp_3F_Movement_EmployeeReturnToPlayer:
	walk_left
	walk_left
	walk_left
	walk_left
	walk_up
	walk_left
	walk_left
	walk_left
	step_end

RustboroCity_DevonCorp_3F_Movement_PlayerFollowToPresident:
	walk_right
	walk_right
	walk_right
	walk_right
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	step_end

RustboroCity_DevonCorp_3F_Movement_PlayerApproachDesk:
	delay_16
	delay_16
	walk_down
	walk_down
	walk_in_place_faster_right
	step_end

RustboroCity_DevonCorp_3F_EventScript_MrStone::
	lock
	faceplayer
	goto_if_set FLAG_RECEIVED_EXP_SHARE, RustboroCity_DevonCorp_3F_EventScript_MrStoneAfterFavor
	goto_if_set FLAG_DELIVERED_STEVEN_LETTER, RustboroCity_DevonCorp_3F_EventScript_GiveExpShare
	msgbox RustboroCity_DevonCorp_3F_Text_CountingOnYou, MSGBOX_DEFAULT
	closemessage
	applymovement VAR_LAST_TALKED, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

RustboroCity_DevonCorp_3F_EventScript_GiveExpShare::
	msgbox RustboroCity_DevonCorp_3F_Text_ThankYouForDeliveringLetter, MSGBOX_DEFAULT
	giveitem ITEM_EXP_SHARE
	goto_if_eq VAR_RESULT, FALSE, Common_EventScript_ShowBagIsFull
	setflag FLAG_RECEIVED_EXP_SHARE
	msgbox RustboroCity_DevonCorp_3F_Text_ExplainExpShare, MSGBOX_DEFAULT
	closemessage
	applymovement VAR_LAST_TALKED, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

RustboroCity_DevonCorp_3F_EventScript_MrStoneAfterFavor::
	msgbox RustboroCity_DevonCorp_3F_Text_NotFamiliarWithTrends, MSGBOX_DEFAULT
	closemessage
	applymovement VAR_LAST_TALKED, Common_Movement_FaceOriginalDirection
	waitmovement 0
	release
	end

RustboroCity_DevonCorp_3F_EventScript_Employee::
	lock
	faceplayer
	goto_if_set FLAG_RECEIVED_REPEAT_BALL, RustboroCity_DevonCorp_3F_EventScript_EmployeeBalls
	msgbox RustboroCity_DevonCorp_3F_Text_VisitCaptSternShipyard, MSGBOX_DEFAULT
	release
	end

RustboroCity_DevonCorp_3F_EventScript_EmployeeBalls::
	msgbox RustboroCity_DevonCorp_3F_Text_RepeatAndTimerHugelyPopular, MSGBOX_DEFAULT
	release
	end

RustboroCity_DevonCorp_3F_EventScript_RareRocksDisplay::
	msgbox RustboroCity_DevonCorp_3F_Text_RareRocksDisplay, MSGBOX_SIGN
	end

RustboroCity_DevonCorp_3F_Text_Researcher:
	.string "Researcher$"

RustboroCity_DevonCorp_3F_Text_TheNoise:
	.string "The Noise$"

RustboroCity_DevonCorp_3F_Text_MrStoneIHaveFavor:
	.string "It's me, The Noise, president of the\n"
	.string "Devon Corporation.\p"
	.string "I'd just got word about you!\p"
	.string "You saved this researcher guy with\n"
	.string "his goods here!\p"
	.string "I heard he has a bit of a favor with\n"
	.string "you delivering the package he had to\l"
	.string "Slateport's Shipyard.\p"
	.string "I have a favor of my own since you're\n"
	.string "on the way there anyways.\p"
	.string "There's a Letter I wrote to Hakos\n"
	.string "Baelz that I've been meaning to\l"
	.string "deliver but haven't.\p"
	.string "She should be in Dreamford's icy cave,\n"
	.string "last I checked.$"

RustboroCity_DevonCorp_3F_Text_MrStoneWantYouToHaveThis:
	.string "I do happen to have a little thing for\n"
	.string "you as well for saving my little\p"
	.string "researcher guy here.\n"
	.string "This is all yours here!$"

RustboroCity_DevonCorp_3F_Text_ReceivedPokenav:
	.string "{PLAYER} received an iDollNav.$"

RustboroCity_DevonCorp_3F_Text_MrStoneExplainPokenavRestUp:
	.string "That device…\p"
	.string "It's a Puppet Navigator, or iDollNav\n"
	.string "for short.\p"
	.string "You know, the naming itself needs a\n"
	.string "bit of a renaming personally, but\l"
	.string "oh well.\p"
	.string "It's an indispensable tool for any\n"
	.string "Trainer on an adventure.\p"
	.string "It has a map of the Hoenn region.\p"
	.string "You can check the locations of\n"
	.string "Dreamford and Slateport easily!\p"
	.string "Oh yeah, I'm sure you came across an\n"
	.string "Aqua Grunt from earlier.\p"
	.string "They come from Team Aqua, and have beef\n"
	.string "with Team Magma that's causing some\l"
	.string "chaos around the region.\p"
	.string "You should get some rest to prepare\n"
	.string "yourself against these people.$"

RustboroCity_DevonCorp_3F_Text_MrStoneGoWithCautionAndCare:
	.string "Well, then, {PLAYER}{KUN},\n"
	.string "go with caution and care!$"

RustboroCity_DevonCorp_3F_Text_CountingOnYou:
	.string "MR. STONE: I'm counting on you!$"

RustboroCity_DevonCorp_3F_Text_ThankYouForDeliveringLetter:
	.string "MR. STONE: You delivered my LETTER?\n"
	.string "Thank you kindly!\p"
	.string "This is my way of thanking you.\n"
	.string "It should help you, a TRAINER.$"

RustboroCity_DevonCorp_3F_Text_ExplainExpShare:
	.string "MR. STONE: A POKéMON holding that\n"
	.string "EXP. SHARE will be given some of the\l"
	.string "EXP Points from battle.\p"
	.string "It will get EXP Points even if it didn't\n"
	.string "actually battle.\p"
	.string "I would say EXP. SHARE is quite useful\n"
	.string "for raising weak POKéMON.$"

RustboroCity_DevonCorp_3F_Text_NotFamiliarWithTrends:
	.string "MR. STONE: Since my youth, I've immersed\n"
	.string "myself in work.\p"
	.string "Consequently, I'm not familiar with\n"
	.string "trends and that sort of thing.\p"
	.string "But do young people all want to be\n"
	.string "TRAINERS in the POKéMON LEAGUE?$"

RustboroCity_DevonCorp_3F_Text_ThisIs3rdFloorWaitHere:
	.string "This is the DEVON CORPORATION's\n"
	.string "third floor.\p"
	.string "Our PRESIDENT's OFFICE is on\n"
	.string "this floor.\p"
	.string "Anyway, I can't tell you how much I'm\n"
	.string "grateful for what you've done.\p"
	.string "Um… By the way, that parcel\n"
	.string "you got back for us…\p"
	.string "Could I get you to deliver that to\n"
	.string "the SHIPYARD in SLATEPORT?\p"
	.string "It would be awful if those robbers\n"
	.string "tried to take it again.\p"
	.string "Uh… Hehehe, so, uh, could I count\n"
	.string "on you to do that for me?\p"
	.string "Oh, that's right.\n"
	.string "Could you wait here a second?$"

RustboroCity_DevonCorp_3F_Text_WordWithPresidentComeWithMe:
	.string "Our PRESIDENT would like to have\n"
	.string "a word with you.\p"
	.string "Please come with me.$"

RustboroCity_DevonCorp_3F_Text_PleaseGoAhead:
	.string "Please, go ahead.$"

RustboroCity_DevonCorp_3F_Text_VisitCaptSternShipyard:
	.string "If you visit the SHIPYARD in SLATEPORT,\n"
	.string "you should go see CAPT. STERN.$"

RustboroCity_DevonCorp_3F_Text_RepeatAndTimerHugelyPopular:
	.string "DEVON's new products, the REPEAT BALL\n"
	.string "and TIMER BALL, have become hugely\l"
	.string "popular among TRAINERS.$"

RustboroCity_DevonCorp_3F_Text_RareRocksDisplay:
	.string "It's a collection of rare rocks and\n"
	.string "stones assembled by the PRESIDENT.$"

`
